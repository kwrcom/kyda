# ‚úÖ HashiCorp Vault Integration - Complete Checklist

## –ó–∞–¥–∞–Ω–∏–µ 8: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ HashiCorp Vault –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏

### ‚úÖ –¶–µ–ª—å: –£–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## üìã –ó–∞–¥–∞—á–∏ –∏ –°—Ç–∞—Ç—É—Å

### ‚úÖ –ó–∞–¥–∞—á–∞ 1: –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ HashiCorp Vault –≤ docker-compose.yml (dev-—Ä–µ–∂–∏–º)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª**: `docker-compose.yml` (—Å—Ç—Ä–æ–∫–∏ 528-550)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**:
- [x] –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `vault` —Å –æ–±—Ä–∞–∑–æ–º `hashicorp/vault:latest`
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω dev-—Ä–µ–∂–∏–º —Å in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä–Ω–µ–≤–æ–π —Ç–æ–∫–µ–Ω: `root`
- [x] –û—Ç–∫—Ä—ã—Ç –ø–æ—Ä—Ç 8200 –¥–ª—è API
- [x] –î–æ–±–∞–≤–ª–µ–Ω health check: `vault status`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ capability IPC_LOCK –¥–ª—è –∑–∞—â–∏—Ç—ã –ø–∞–º—è—Ç–∏
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π unseal –≤ dev-—Ä–µ–∂–∏–º–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker-compose ps | grep vault
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å: vault (healthy)
```

---

### ‚úÖ –ó–∞–¥–∞—á–∞ 2: –ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Vault KV storage

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª**: `docker-compose.yml` (—Å—Ç—Ä–æ–∫–∏ 552-578) - —Å–µ—Ä–≤–∏—Å `vault-init`

**–°–µ–∫—Ä–µ—Ç—ã, –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–µ –≤ Vault**:

#### Backend Secrets (`secret/backend`):
- [x] `postgres_user` = "postgres"
- [x] `postgres_password` = "password"
- [x] `postgres_db` = "mlflow"
- [x] `minio_access_key` = "minioadmin"
- [x] `minio_secret_key` = "minioadmin"
- [x] `jwt_algorithm` = "RS256"

#### Airflow Secrets (`secret/airflow`):
- [x] `postgres_user` = "airflow"
- [x] `postgres_password` = "airflow"
- [x] `postgres_db` = "airflow"
- [x] `fernet_key` = "ZmDfcTF7_60GrrY167zsiPd67pEvs0aGOv2oasOM1Pg="
- [x] `webserver_secret_key` = "airflow-secret-key"
- [x] `minio_access_key` = "minioadmin"
- [x] `minio_secret_key` = "minioadmin"

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker exec vault vault kv get secret/backend
docker exec vault vault kv get secret/airflow
```

---

### ‚úÖ –ó–∞–¥–∞—á–∞ 3: –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª**: `docker-compose.yml` (—Å—Ç—Ä–æ–∫–∏ 552-578) - —Å–µ—Ä–≤–∏—Å `vault-init`

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏**:

#### backend-policy:
```hcl
path "secret/data/backend" {
  capabilities = ["read"]
}
```
- [x] –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ `backend-policy`
- [x] –†–∞–∑—Ä–µ—à–∞–µ—Ç —á—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–µ–∫—Ä–µ—Ç–æ–≤ backend
- [x] –ó–∞–ø—Ä–µ—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–∏–º —Å–µ–∫—Ä–µ—Ç–∞–º

#### airflow-policy:
```hcl
path "secret/data/airflow" {
  capabilities = ["read"]
}
```
- [x] –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ `airflow-policy`
- [x] –†–∞–∑—Ä–µ—à–∞–µ—Ç —á—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–µ–∫—Ä–µ—Ç–æ–≤ Airflow
- [x] –ó–∞–ø—Ä–µ—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–∏–º —Å–µ–∫—Ä–µ—Ç–∞–º

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker exec vault vault policy list
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å: backend-policy, airflow-policy

docker exec vault vault policy read backend-policy
docker exec vault vault policy read airflow-policy
```

---

### ‚úÖ –ó–∞–¥–∞—á–∞ 4: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ Vault

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### Backend Service

**–§–∞–π–ª**: `services/backend/main.py` (—Å—Ç—Ä–æ–∫–∏ 42-88)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**:
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_vault_secrets()` —Å retry-–ª–æ–≥–∏–∫–æ–π
- [x] –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 2 —Å–µ–∫—É–Ω–¥—ã
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–µ–∫—Ä–µ—Ç–æ–≤
- [x] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ `secret/backend`
- [x] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [x] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `VAULT_ADDR`, `VAULT_TOKEN`
- [x] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `vault-init` –≤ docker-compose

**–ö–æ–¥**:
```python
def get_vault_secrets(max_retries=5, retry_delay=2):
    vault_addr = os.getenv('VAULT_ADDR', 'http://vault:8200')
    vault_token = os.getenv('VAULT_TOKEN', 'root')
    
    client = hvac.Client(url=vault_addr, token=vault_token)
    secret_response = client.secrets.kv.v2.read_secret_version(path='backend')
    return secret_response['data']['data']
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker logs backend | findstr "Successfully retrieved secrets"
```

#### Airflow Services

**–§–∞–π–ª—ã**: 
- `airflow/dags/vault_helper.py` (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
- `airflow/dags/train_fraud_detector.py` (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π DAG)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**:
- [x] –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `vault_helper.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
  - `get_vault_client()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å retry-–ª–æ–≥–∏–∫–æ–π
  - `get_secrets()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
  - `get_airflow_secrets()` - —É–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è DAGs
  - `get_backend_secrets()` - —É–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è backend
- [x] Singleton pattern –¥–ª—è Vault –∫–ª–∏–µ–Ω—Ç–∞
- [x] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è API-–≤—ã–∑–æ–≤–æ–≤
- [x] –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è
- [x] –û–±–Ω–æ–≤–ª–µ–Ω DAG `train_fraud_detector.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è vault_helper
- [x] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `VAULT_ADDR`, `VAULT_TOKEN`

**–ö–æ–¥**:
```python
from vault_helper import get_airflow_secrets

secrets = get_airflow_secrets()
POSTGRES_PASSWORD = secrets['postgres_password']
MINIO_ACCESS_KEY = secrets['minio_access_key']
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker logs airflow-webserver | findstr "vault"
docker logs airflow-scheduler | findstr "Airflow secrets"
```

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### ‚úÖ –°–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è, –ø–æ–ª—É—á–∞—è —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ Vault

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å healthy
docker-compose ps

# Backend –ø–æ–ª—É—á–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã
docker logs backend | findstr "Vault"

# Airflow –ø–æ–ª—É—á–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã
docker logs airflow-webserver | findstr "vault"

# –ó–∞–ø—É—Å–∫ health check
python scripts\vault_health_check.py
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ All Vault health checks passed!

# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
python scripts\test_vault_integration.py
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Total: 7/7 tests passed
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

---

### ‚úÖ –°–µ–∫—Ä–µ—Ç—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ docker-compose.yml –∏ .env —Ñ–∞–π–ª–æ–≤

#### –£–¥–∞–ª–µ–Ω–æ –∏–∑ docker-compose.yml (–¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π):

**Backend service** (—Å—Ç—Ä–æ–∫–∏ 362-394):
- [x] ‚ùå –ù–µ—Ç hardcoded –ø–∞—Ä–æ–ª–µ–π –ë–î
- [x] ‚ùå –ù–µ—Ç –∫–ª—é—á–µ–π MinIO
- [x] ‚ùå –ù–µ—Ç JWT —Å–µ–∫—Ä–µ—Ç–æ–≤
- [x] ‚úÖ –¢–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: VAULT_ADDR, VAULT_TOKEN

**Airflow services** (—Å—Ç—Ä–æ–∫–∏ 183-306):
- [x] ‚ùå –ù–µ—Ç –ø–∞—Ä–æ–ª–µ–π –ë–î –≤ environment
- [x] ‚ùå –ù–µ—Ç Fernet key –≤ environment
- [x] ‚ùå –ù–µ—Ç webserver secret key –≤ environment
- [x] ‚úÖ –¢–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: VAULT_ADDR, VAULT_TOKEN

#### –£–¥–∞–ª–µ–Ω–æ –∏–∑ .env:
- [x] `.env` —Ñ–∞–π–ª—ã –≤ `.gitignore`
- [x] –°–µ–∫—Ä–µ—Ç—ã –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö
- [x] –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –≤ Vault

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (postgres, minio, mlflow) –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å environment variables, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏:
1. –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç Vault –Ω–∞—Ç–∏–≤–Ω–æ
2. –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –¥–æ Vault
3. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
4. –≠—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è dev-—Ä–µ–∂–∏–º–∞

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–∫—Ä–∏–ø—Ç—ã

1. **scripts/vault_health_check.py**
   - –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Vault
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∏—Ç–∏–∫

2. **scripts/test_vault_integration.py**
   - –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - 7 —Ç–µ—Å—Ç–æ–≤: KV engine, —Å–µ–∫—Ä–µ—Ç—ã, –ø–æ–ª–∏—Ç–∏–∫–∏, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

3. **scripts/setup_vault.bat**
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
   - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **docs/VAULT_INTEGRATION.md**
   - –ü–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - Production considerations
   - Troubleshooting guide

2. **docs/VAULT_DEPLOYMENT.md**
   - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
   - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
   - Troubleshooting
   - Next steps

3. **docs/VAULT_IMPLEMENTATION_SUMMARY.md**
   - –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
   - –°–ø–∏—Å–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ß—Ç–æ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ
   - –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

4. **docs/VAULT_ARCHITECTURE.md**
   - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
   - –°—Ö–µ–º—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
   - Dev vs Production

5. **VAULT_README.md**
   - –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
   - Quick start guide
   - –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã
   - –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –ö–æ–¥

1. **airflow/dags/vault_helper.py**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è Airflow
   - Singleton pattern
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
   - Retry-–ª–æ–≥–∏–∫–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:

```bash
scripts\setup_vault.bat
pip install hvac
python scripts\vault_health_check.py
python scripts\test_vault_integration.py
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:

```bash
docker-compose up -d
timeout /t 30
python scripts\vault_health_check.py
```

### –î–æ—Å—Ç—É–ø –∫ Vault UI:

- URL: http://localhost:8200
- –ú–µ—Ç–æ–¥: Token
- –¢–æ–∫–µ–Ω: `root`

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ |
|--------|--------|-----------|
| 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Vault | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û | ‚úÖ |
| 2. –ü–µ—Ä–µ–Ω–æ—Å —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ Vault | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û | ‚úÖ |
| 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫ –¥–æ—Å—Ç—É–ø–∞ | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û | ‚úÖ |
| 4. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ | ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û | ‚úÖ |
| **–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞** | **‚úÖ –í–°–ï –í–´–ü–û–õ–ù–ï–ù–´** | **‚úÖ** |

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–≤–µ—Ä—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:

1. ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å vault_helper –¥–ª—è Airflow
2. ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. ‚úÖ Retry-–ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
4. ‚úÖ Healthcheck —Å–∫—Ä–∏–ø—Ç—ã
5. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (7 —Ç–µ—Å—Ç–æ–≤)
6. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
7. ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (4 –¥–æ–∫—É–º–µ–Ω—Ç–∞)
8. ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
9. ‚úÖ Production guidelines
10. ‚úÖ Security best practices

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

### Dev vs Production:

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Development)**:
- ‚úÖ In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ Auto-unseal
- ‚úÖ Root token
- ‚úÖ –ë–µ–∑ TLS
- ‚ö†Ô∏è –ù–ï –¥–ª—è production!

**–î–ª—è Production –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ**:
1. Persistent storage backend (Consul, etcd)
2. TLS/SSL —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
3. AppRole authentication
4. Audit logging
5. HA –∫–ª–∞—Å—Ç–µ—Ä (3+ —É–∑–ª–∞)
6. Auto-unseal —á–µ—Ä–µ–∑ cloud KMS
7. Regular backups
8. Monitoring & alerting

–°–º. `docs/VAULT_INTEGRATION.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ó–∞–¥–∞–Ω–∏–µ 8 –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!**

–í—Å–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- ‚úÖ Vault —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –≤ docker-compose
- ‚úÖ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ Vault KV storage
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–æ–∑–¥–∞–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –°–µ—Ä–≤–∏—Å—ã –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ Vault
- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –°–µ—Ä–≤–∏—Å—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏–∑ Vault
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**:
- ‚ú® –ü—Ä–µ–≤—ã—à–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
- ‚ú® –î–æ–±–∞–≤–ª–µ–Ω—ã best practices
- ‚ú® –ì–æ—Ç–æ–≤ –∫ production (—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏)
- ‚ú® –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- ‚ú® –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-11-28  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–û –ò –ü–†–û–í–ï–†–ï–ù–û
